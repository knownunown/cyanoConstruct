<!--cyano 500-->

{% extends "base.html" %}

{% block pageName %}Login 2{% endblock %}

{% block headContent %}

<script>
function onSignIn(googleUser) {
	var profile = googleUser.getBasicProfile();

	var IDtoken = googleUser.getAuthResponse().id_token;

	var loginData = "{'IDtoken': '" + IDtoken + "', 'fullName': '" + profile.getName() + "', 'email': '" + profile.getEmail() + "'}";

	$.ajax({
		data : {loginData: loginData},
		type : 'POST',
		url : '/login2process'
		})
	.done(function(data){
		if(data.succeeded){
			alert(data.output);
		}
		else{
			alert(data.output);
		}
	});
	event.preventDefault();
}

function signOut(){
    var auth2 = gapi.auth2.getAuthInstance();
    auth2.signOut();
    alert("signed out");
}

function bodyOnload(){}
</script>
{% endblock %}

{% block content %}
<h1>Log In Using Google</h1>

<div class = "g-signin2" data-onsuccess = "onSignIn"></div>

<input class = "styledButton" type = "button" value = "sign out" onclick = "signOut()">
{% endblock %}